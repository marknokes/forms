(function(e){Number.prototype.isBetween=function(e,t){return t>=this&&this>=e};e.getInteger=function(t,n){return e.isNumeric(t)?parseInt(t,10):e.isNumeric(n)?parseInt(n,10):0};e.fn.insertAt=function(t,n){return this.each(function(){var r=e(this).children().size();if(t.isBetween(0,r-1)){e(this).children().eq(t).before(n)}else{e.error("Index out of range. Index => "+t+", Length => "+r)}})};e.fn.cloneable=function(t){if(e.fn.cloneable.methods[t]){return e.fn.cloneable.methods[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return e.fn.cloneable.methods.init.apply(this,arguments)}else{e.error('The method "'+t+'" is not in the plug-in jquery.cloneable')}};e.fn.cloneable.methods={init:function(t){return this.each(function(){var n=e(this);var r={fadeEffect:true,events:{onCloneAdded:function(e){},onCloneRemoved:function(e){}}};var i=e.extend({},r,n.data());i=e.extend({},i,r,t);i.events=e.extend({},r.events,i.events);var s=null;var o=[];e.each(n.find(".model"),function(t,n){if(t==0){s=e(n).parent()}o.push(e(n).clone())});if(o.length){n.removeData();n.data("options",i);s.empty();n.data("_root",s);n.data("_models",o);n.data("_elements",[])}else{e.error("There are no models in element")}})},addClone:function(t){return this.each(function(){var n=e(this);var r={data:{},index:-1,model:null};var i=e.extend({},r,t);var s=i.data;var o=e.getInteger(i.index,0);var u=i.model;var a=n.data("_elements").length;if(o.isBetween(-1,a)){if(e.isArray(s)){e.each(s,function(e,t){n.cloneable("addClone",{data:t,index:o,model:u})})}else{var f=n.cloneable("getModel",u);if(f!=null){var l=n.data("options");if(l.fadeEffect==true){f.hide()}var c=n.data("_root");if(o==-1||o==a){e(c).append(f)}else{e(c).insertAt(o,f)}if(l.fadeEffect==true){f.fadeIn()}n.data("_elements").splice(f.index(),0,f);n.cloneable("setData",{index:f.index(),data:s});l.events.onCloneAdded.apply(n,[{index:f.index(),node:f,data:s,length:n.data("_elements").length}])}else{e.error("There are no models in element")}}}else{e.error("Index out of range. Index => "+o+", Length => "+a)}})},getModel:function(t){var n=e(this);var r=n.data("_models");var i=null;if(r.length){if(t==undefined){i=r[0].clone()}else{e.each(r,function(n,s){if(e(s).data("modelName")==t){i=r[n].clone()}})}}return i},getData:function(t){var n=e(this);var r=n.data("_elements");var i=r.length;var s=null;if(t.isBetween(0,i-1)){s=r[t].data("_data")}else{e.error("Index out of range. Index => "+t+", Length => "+i)}return s},setData:function(t){return this.each(function(){var n=e(this);var r={index:0,data:{}};var i=e.extend({},r,t);var s=i.data;var o=e.getInteger(i.index,0);var u=n.data("_elements");var a=u.length;if(o.isBetween(0,a-1)){var f=u[o];f.data("_data",s);e.each(s,function(t,n){var r=e(f).find('[name*="'+t+'[]"]');if(r.length){switch(r[0].nodeName){case"INPUT":r.attr("value",n);break;case"TEXTAREA":r.attr("value",n);break;case"SELECT":r.attr("value",n);break;case"IMG":r.attr("src",n);break;default:r.attr("value",n).html(n);break}}})}else{e.error("Index out of range. Index => "+o+", Length => "+a)}})},changeModel:function(t){return this.each(function(){var n=e(this);var r={data:{},index:0,model:null};var i=e.extend({},r,t);var s=i.data;var o=e.getInteger(i.index,0);var u=i.model;var a=n.data("_elements");var f=a.length;if(o.isBetween(0,f-1)){var l=n.cloneable("getModel",u);if(l!=null){var c=a[o];c.replaceWith(l);n.data("_elements")[o]=l;n.cloneable("setData",{index:o,data:s})}else{e.error("There are no models in element")}}else{e.error("Index out of range. Index => "+o+", Length => "+f)}})},removeClone:function(t){return this.each(function(){var n=e(this);var r=n.data("_elements");var i=r.length;if(t.isBetween(0,i-1)){var s=r.splice(t,1);var o=e(s[0]);var u=n.data("options");u.events.onCloneRemoved.apply(n,[{index:t,node:o,length:r.length}]);if(u.fadeEffect==true){o.fadeOut(function(){o.remove()})}else{o.remove()}n.data("_elements",r)}else{e.error("Index out of range. Index => "+t+", Length => "+i)}})},removeAllClone:function(){return this.each(function(){var t=e(this);var n=t.data("_elements").length;for(var r=n-1;r>=0;r--){t.cloneable("removeClone",r)}})}}})(jQuery)